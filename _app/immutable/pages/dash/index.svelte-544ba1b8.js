import{C as de,R as Le,T as Te,U as Re,S as xe,i as Ie,s as Ae,e as x,k as B,t as W,O as T,c as I,a as v,m as V,h as q,d,P as R,K as me,b as e,g as J,J as f,j as X,l as ge,E as ve,Q as De,L as Y,w as Pe,x as Be,y as Ve,q as ee,o as ae,B as Se,f as _e,p as Ue,N as we,n as Oe}from"../../chunks/index-545e3c05.js";import{g as Ne}from"../../chunks/navigation-75a744b1.js";import{b as Fe}from"../../chunks/paths-b9644fda.js";import{w as Me}from"../../chunks/index-7681234b.js";import{U as je,J as Ge}from"../../chunks/login_store-a1904add.js";import{b as Je}from"../../chunks/api-374feec2.js";import"../../chunks/singletons-eca981c1.js";function Ee(s){return Object.prototype.toString.call(s)==="[object Date]"}function ie(s,r){if(s===r||s!==s)return()=>s;const o=typeof s;if(o!==typeof r||Array.isArray(s)!==Array.isArray(r))throw new Error("Cannot interpolate values of different type");if(Array.isArray(s)){const t=r.map((l,n)=>ie(s[n],l));return l=>t.map(n=>n(l))}if(o==="object"){if(!s||!r)throw new Error("Object cannot be null");if(Ee(s)&&Ee(r)){s=s.getTime(),r=r.getTime();const n=r-s;return a=>new Date(s+a*n)}const t=Object.keys(r),l={};return t.forEach(n=>{l[n]=ie(s[n],r[n])}),n=>{const a={};return t.forEach(u=>{a[u]=l[u](n)}),a}}if(o==="number"){const t=r-s;return l=>s+l*t}throw new Error(`Cannot interpolate ${o} values`)}function We(s,r={}){const o=Me(s);let t,l=s;function n(a,u){if(s==null)return o.set(s=a),Promise.resolve();l=a;let _=t,C=!1,{delay:m=0,duration:p=400,easing:b=Re,interpolate:w=ie}=de(de({},r),u);if(p===0)return _&&(_.abort(),_=null),o.set(s=l),Promise.resolve();const h=Le()+m;let y;return t=Te(i=>{if(i<h)return!0;C||(y=w(s,a),typeof p=="function"&&(p=p(s,a)),C=!0),_&&(_.abort(),_=null);const g=i-h;return g>p?(o.set(s=a),!1):(o.set(s=y(b(g/p))),!0)}),t.promise}return{set:n,update:(a,u)=>n(a(l,s),u),subscribe:o.subscribe}}function ye(s,r,o){const t=s.slice();return t[1]=r[o],t}function ke(s){var ce;let r,o,t,l,n,a,u=s[1].title+"",_,C,m,p,b,w,h,y=s[1].status.toLocaleLowerCase()+"",i,g,c,k,P,j,S=((ce=s[1].episodes)!=null?ce:0)+"",N,F,te,E,U,z,H,O,re,M,se,Q=(s[1].start?s[1].start.toLocaleString("defaul",{month:"long",year:"numeric"}):"Unknown")+"",K,le,Z;return{c(){r=x("a"),o=x("img"),l=B(),n=x("div"),a=x("p"),_=W(u),C=B(),m=x("div"),p=T("svg"),b=T("polyline"),w=B(),h=x("p"),i=W(y),g=B(),c=T("svg"),k=T("polygon"),P=B(),j=x("p"),N=W(S),F=W(" Episodes"),te=B(),E=T("svg"),U=T("line"),z=T("path"),H=T("polyline"),O=T("line"),re=B(),M=x("p"),se=W("Released on "),K=W(Q),le=B(),this.h()},l(A){r=I(A,"A",{href:!0,target:!0,class:!0});var D=v(r);o=I(D,"IMG",{src:!0,class:!0,width:!0,alt:!0}),l=V(D),n=I(D,"DIV",{class:!0});var G=v(n);a=I(G,"P",{class:!0});var ue=v(a);_=q(ue,u),ue.forEach(d),C=V(G),m=I(G,"DIV",{class:!0});var L=v(m);p=R(L,"svg",{xmlns:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var fe=v(p);b=R(fe,"polyline",{points:!0}),v(b).forEach(d),fe.forEach(d),w=V(L),h=I(L,"P",{class:!0});var he=v(h);i=q(he,y),he.forEach(d),g=V(L),c=R(L,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var pe=v(c);k=R(pe,"polygon",{points:!0}),v(k).forEach(d),pe.forEach(d),P=V(L),j=I(L,"P",{});var oe=v(j);N=q(oe,S),F=q(oe," Episodes"),oe.forEach(d),te=V(L),E=R(L,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var $=v(E);U=R($,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),v(U).forEach(d),z=R($,"path",{d:!0}),v(z).forEach(d),H=R($,"polyline",{points:!0}),v(H).forEach(d),O=R($,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),v(O).forEach(d),$.forEach(d),re=V(L),M=I(L,"P",{class:!0});var ne=v(M);se=q(ne,"Released on "),K=q(ne,Q),ne.forEach(d),L.forEach(d),G.forEach(d),le=V(D),D.forEach(d),this.h()},h(){me(o.src,t=s[1].cover)||e(o,"src",t),e(o,"class","h-32 w-24 object-cover"),e(o,"width","auto"),e(o,"alt","Anime cover"),e(a,"class","text-lg truncate block"),e(b,"points","22 12 18 12 15 21 9 3 6 12 2 12"),e(p,"xmlns","http://www.w3.org/2000/svg"),e(p,"viewBox","0 0 24 24"),e(p,"fill","none"),e(p,"stroke","currentColor"),e(p,"stroke-width","2"),e(p,"stroke-linecap","round"),e(p,"stroke-linejoin","round"),e(p,"class","feather feather-activity svelte-1bky4g"),e(h,"class","capitalize"),e(k,"points","5 3 19 12 5 21 5 3"),e(c,"xmlns","http://www.w3.org/2000/svg"),e(c,"width","24"),e(c,"height","24"),e(c,"viewBox","0 0 24 24"),e(c,"fill","none"),e(c,"stroke","currentColor"),e(c,"stroke-width","2"),e(c,"stroke-linecap","round"),e(c,"stroke-linejoin","round"),e(c,"class","feather feather-play svelte-1bky4g"),e(U,"x1","16.5"),e(U,"y1","9.4"),e(U,"x2","7.5"),e(U,"y2","4.21"),e(z,"d","M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"),e(H,"points","3.27 6.96 12 12.01 20.73 6.96"),e(O,"x1","12"),e(O,"y1","22.08"),e(O,"x2","12"),e(O,"y2","12"),e(E,"xmlns","http://www.w3.org/2000/svg"),e(E,"width","24"),e(E,"height","24"),e(E,"viewBox","0 0 24 24"),e(E,"fill","none"),e(E,"stroke","currentColor"),e(E,"stroke-width","2"),e(E,"stroke-linecap","round"),e(E,"stroke-linejoin","round"),e(E,"class","feather feather-package svelte-1bky4g"),e(M,"class","mt-auto"),e(m,"class","grid px-2 svelte-1bky4g"),e(n,"class","p-3 text-sm overflow-hidden"),e(r,"href",Z=s[2](s[1].id)),e(r,"target","_blank"),e(r,"class","animation border-violet-400 border-opacity-60 border-2 flex flex-row m-1 shadow-xl w-full md:w-[452px] transition-all hover:cursor-pointer hover:shadow-2xl hover:scale-105 svelte-1bky4g")},m(A,D){J(A,r,D),f(r,o),f(r,l),f(r,n),f(n,a),f(a,_),f(n,C),f(n,m),f(m,p),f(p,b),f(m,w),f(m,h),f(h,i),f(m,g),f(m,c),f(c,k),f(m,P),f(m,j),f(j,N),f(j,F),f(m,te),f(m,E),f(E,U),f(E,z),f(E,H),f(E,O),f(m,re),f(m,M),f(M,se),f(M,K),f(r,le)},p(A,D){var G;D&1&&!me(o.src,t=A[1].cover)&&e(o,"src",t),D&1&&u!==(u=A[1].title+"")&&X(_,u),D&1&&y!==(y=A[1].status.toLocaleLowerCase()+"")&&X(i,y),D&1&&S!==(S=((G=A[1].episodes)!=null?G:0)+"")&&X(N,S),D&1&&Q!==(Q=(A[1].start?A[1].start.toLocaleString("defaul",{month:"long",year:"numeric"}):"Unknown")+"")&&X(K,Q),D&1&&Z!==(Z=A[2](A[1].id))&&e(r,"href",Z)},d(A){A&&d(r)}}}function qe(s){let r,o=s[0],t=[];for(let l=0;l<o.length;l+=1)t[l]=ke(ye(s,o,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();r=ge()},l(l){for(let n=0;n<t.length;n+=1)t[n].l(l);r=ge()},m(l,n){for(let a=0;a<t.length;a+=1)t[a].m(l,n);J(l,r,n)},p(l,[n]){if(n&5){o=l[0];let a;for(a=0;a<o.length;a+=1){const u=ye(l,o,a);t[a]?t[a].p(u,n):(t[a]=ke(u),t[a].c(),t[a].m(r.parentNode,r))}for(;a<t.length;a+=1)t[a].d(1);t.length=o.length}},i:ve,o:ve,d(l){De(t,l),l&&d(r)}}}function ze(s,r,o){let t;Y(s,je,u=>o(3,t=u));let{anime:l,rels:n}=r;t.list.find(u=>u.id===l.id);const a=u=>`https://anilist.co/anime/${u}`;return s.$$set=u=>{"anime"in u&&o(1,l=u.anime),"rels"in u&&o(0,n=u.rels)},[n,l,a]}class He extends xe{constructor(r){super(),Ie(this,r,ze,qe,Ae,{anime:1,rels:0})}}function Ce(s,r,o){const t=s.slice();return t[10]=r[o].anime,t[11]=r[o].rels,t}function be(s){let r,o;return r=new He({props:{anime:s[10],rels:s[11]}}),{c(){Pe(r.$$.fragment)},l(t){Be(r.$$.fragment,t)},m(t,l){Ve(r,t,l),o=!0},p(t,l){const n={};l&1&&(n.anime=t[10]),l&1&&(n.rels=t[11]),r.$set(n)},i(t){o||(ee(r.$$.fragment,t),o=!0)},o(t){ae(r.$$.fragment,t),o=!1},d(t){Se(r,t)}}}function Qe(s){let r,o,t,l,n,a,u,_,C,m,p,b,w=s[0],h=[];for(let i=0;i<w.length;i+=1)h[i]=be(Ce(s,w,i));const y=i=>ae(h[i],1,1,()=>{h[i]=null});return{c(){r=x("div"),o=x("div"),t=B(),l=x("div"),n=x("div");for(let i=0;i<h.length;i+=1)h[i].c();a=B(),u=x("footer"),_=x("div"),C=x("a"),m=T("svg"),p=T("path"),this.h()},l(i){r=I(i,"DIV",{class:!0});var g=v(r);o=I(g,"DIV",{class:!0,style:!0}),v(o).forEach(d),g.forEach(d),t=V(i),l=I(i,"DIV",{class:!0});var c=v(l);n=I(c,"DIV",{class:!0});var k=v(n);for(let F=0;F<h.length;F+=1)h[F].l(k);k.forEach(d),c.forEach(d),a=V(i),u=I(i,"FOOTER",{class:!0});var P=v(u);_=I(P,"DIV",{class:!0});var j=v(_);C=I(j,"A",{href:!0});var S=v(C);m=R(S,"svg",{width:!0,height:!0,viewBox:!0,class:!0,xmlns:!0});var N=v(m);p=R(N,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,transform:!0}),v(p).forEach(d),N.forEach(d),S.forEach(d),j.forEach(d),P.forEach(d),this.h()},h(){e(o,"class","bg-accent h-full"),_e(o,"width",s[1]+"%"),e(r,"class","w-full h-1"),e(n,"class","scrolly gap-2 justify-center items-start flex flex-wrap snap-y overflow-y-scroll p-3 mx-auto w-full svelte-5j42bw"),e(l,"class","flex-1 bg-base-200"),e(p,"fill-rule","evenodd"),e(p,"clip-rule","evenodd"),e(p,"d","M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z"),e(p,"transform","scale(64)"),e(m,"width","24"),e(m,"height","24"),e(m,"viewBox","0 0 1024 1024"),e(m,"class","fill-current"),e(m,"xmlns","http://www.w3.org/2000/svg"),e(C,"href","https://github.com/thegamerx1/diduwatch"),e(_,"class","grid-flow-col gap-4 md:place-self-center md:justify-self-end"),e(u,"class","footer items-center p-4 bg-neutral text-neutral-content")},m(i,g){J(i,r,g),f(r,o),J(i,t,g),J(i,l,g),f(l,n);for(let c=0;c<h.length;c+=1)h[c].m(n,null);J(i,a,g),J(i,u,g),f(u,_),f(_,C),f(C,m),f(m,p),b=!0},p(i,[g]){if((!b||g&2)&&_e(o,"width",i[1]+"%"),g&1){w=i[0];let c;for(c=0;c<w.length;c+=1){const k=Ce(i,w,c);h[c]?(h[c].p(k,g),ee(h[c],1)):(h[c]=be(k),h[c].c(),ee(h[c],1),h[c].m(n,null))}for(Oe(),c=w.length;c<h.length;c+=1)y(c);Ue()}},i(i){if(!b){for(let g=0;g<w.length;g+=1)ee(h[g]);b=!0}},o(i){h=h.filter(Boolean);for(let g=0;g<h.length;g+=1)ae(h[g]);b=!1},d(i){i&&d(r),i&&d(t),i&&d(l),De(h,i),i&&d(a),i&&d(u)}}}function $e(s,r,o){let t,l,n;Y(s,je,w=>o(4,l=w)),Y(s,Ge,w=>o(5,n=w));let a=[],u=[];const _=["COMPLETED","CURRENT","REPEATING"],C=["COMPLETED","REPEATING"],m=["FINISHED","RELEASING"];let p=We(0);Y(s,p,w=>o(1,t=w)),n.valid||Ne(`${Fe}/login`),b();async function b(){let w=l.list.filter(y=>C.includes(y.status)).map(y=>y.id),h=Je(n.token,w);for await(let{animes:y,progress:i}of h){we(p,t=i,t),a=[...a,...y];for(let g of y){let c=l.list.find(k=>k.id===g.id);if(c&&_.includes(c.status)){let k=g.relations.filter(P=>P.relationType==="SEQUEL"&&m.includes(P.status)&&l.list.find(j=>j.id===P.id&&!_.includes(j.status)));k.length>0&&o(0,u=[...u,{anime:g,rels:k}])}}}we(p,t=100,t)}return[u,t,p]}class st extends xe{constructor(r){super(),Ie(this,r,$e,Qe,Ae,{})}}export{st as default};
